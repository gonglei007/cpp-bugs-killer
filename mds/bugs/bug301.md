<h2 align="center">运算符优先级</h2>

## 找Bug

如果 `pceltFetched` 不是一个空指针，该函数必须增加该指针指向的ULONG类型变量的值。这段代码有什么问题？

```cpp
STDMETHODIMP CCustomAutoComplete::Next(..., ULONG *pceltFetched)
{
  ...
  if (pceltFetched != NULL)
    *pceltFetched++;
  ...
}
```

### 说明

**问题分析：**

`++` 运算符的优先级高于 `*` 运算符（指针解引用）。因此 `*pceltFetched++` 的实际执行顺序是：

```cpp
// 实际执行顺序
TMP = pceltFetched + 1;      // 先递增指针
*pceltFetched;                // 解引用原指针（但没有使用结果）
pceltFetched = TMP;           // 更新指针
```

实际上它仅仅增加了指针的值，而不是指针指向的值。

**正确的写法：**

```cpp
if (pceltFetched != NULL)
    (*pceltFetched)++;  // 使用括号明确优先级
```

**要点：**
- 运算符优先级：`++` 的优先级高于 `*`
- 后置递增：`ptr++` 先返回原值，再递增
- 括号的作用：使用括号可以改变运算顺序

---
* [示例代码](../../source/bug301/source/main.cpp)

## 拓展阅读
* [C++ Operator Precedence](https://en.cppreference.com/w/cpp/language/operator_precedence)

