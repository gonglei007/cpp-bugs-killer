<h2 align="center">未初始化变量</h2>

## 找Bug

这段代码有什么问题？

```cpp
int CalculateSum(int count)
{
    int sum;  // Bug: 未初始化
    for (int i = 0; i < count; i++) {
        sum += i;  // 使用未初始化的变量
    }
    return sum;
}
```

### 说明

**问题分析：**

`sum` 变量未初始化，其值是不确定的（可能是任意值）。使用未初始化的变量会导致：
- 结果不可预测
- 程序行为不一致
- 难以调试

**正确的写法：**

```cpp
int CalculateSum(int count)
{
    int sum = 0;  // 正确：初始化为0
    for (int i = 0; i < count; i++) {
        sum += i;
    }
    return sum;
}
```

**其他常见未初始化问题：**

**1. 结构体/类成员未初始化**
```cpp
struct Point {
    int x, y;  // 未初始化
};

Point p;  // p.x 和 p.y 的值不确定
```

**正确的写法：**
```cpp
struct Point {
    int x = 0, y = 0;  // C++11: 成员初始化器
};

// 或者使用构造函数
struct Point {
    int x, y;
    Point() : x(0), y(0) {}
};
```

**2. 数组未初始化**
```cpp
int arr[10];  // 所有元素的值不确定
```

**正确的写法：**
```cpp
int arr[10] = {};  // 所有元素初始化为0
int arr[10] = {1, 2, 3};  // 前3个元素有值，其余为0
```

**3. 指针未初始化**
```cpp
int* ptr;  // 指向随机地址
*ptr = 10;  // 危险：可能崩溃或破坏数据
```

**正确的写法：**
```cpp
int* ptr = nullptr;  // 初始化为空指针
if (ptr != nullptr) {
    *ptr = 10;
}
```

**要点：**
- 总是初始化变量：特别是局部变量
- 使用编译器警告：开启 `-Wall` 或 `/W4` 可以检测未初始化变量
- 成员初始化列表：在构造函数中使用初始化列表
- 默认初始化：了解C++的默认初始化规则

---
* [示例代码](../../source/bug504/source/main.cpp)

## 拓展阅读
* [C++ Initialization](https://en.cppreference.com/w/cpp/language/initialization)

